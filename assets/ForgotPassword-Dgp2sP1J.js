import{r as i,u as k,j as e,e as u}from"./index-Cysv3JTe.js";import{L as C,l as P}from"./LeftSideBar-ZNfk21zw.js";const F=()=>{const[r,h]=i.useState(1),[t,j]=i.useState({email:"",otp:"",password:"",confirmPassword:""}),[a,p]=i.useState({}),[g,l]=i.useState(null),[f,d]=i.useState(null),[w,o]=i.useState(!1),y=k(),m=(s,x)=>{j(n=>({...n,[s]:x})),a[s]&&p(n=>({...n,[s]:""}))},v=async s=>{var x,n;s.preventDefault(),l(null),d(null),p({});try{if(r===1&&(o(!0),(await u.post("https://doctor-chat-8184.onrender.com/api/auth/forgot-password",{email:t.email})).status==200?(d("OTP sent succefully"),h(2)):l("Invalid Email"),o(!1)),r===2&&(o(!0),(await u.post("https://doctor-chat-8184.onrender.com/api/auth/verify-otp",{email:t.email,otp:t.otp})).status==200?(d("OTP validation Succefull"),h(3)):l("Please enter the valid 4-digit OTP"),o(!1)),r===3){if(t.password!=t.confirmPassword||t.password.length<6){l("passwords do not match or minmum length required");return}o(!0),(await u.post("https://doctor-chat-8184.onrender.com/api/auth/reset-password",{email:t.email,password:t.password})).status==200?(d("Password Updated Successfully"),y("/login")):l("Please enter a valid password"),o(!1)}}catch(c){const N=(n=(x=c.response)==null?void 0:x.data)==null?void 0:n.message;l(N||c.message||"Something went wrong")}finally{o(!1)}},b={1:{title:"Reset Password",desc:"Enter your email address to receive a reset code"},2:{title:"Verify OTP",desc:`Enter the 6-digit code sent to ${t.email}`},3:{title:"New Password",desc:"Create your new password"}}[r];return e.jsx("div",{className:"min-h-screen w-full bg-gradient-to-br from-[#F0FDFF] via-[#E6FFFE] to-[#D1F5F7] py-4 px-4 flex items-center justify-center",children:e.jsx("div",{className:"w-full max-w-6xl mx-auto",children:e.jsxs("div",{className:"grid lg:grid-cols-2 gap-8 items-center",children:[e.jsx("div",{className:"hidden lg:flex flex-col justify-center items-center p-8",children:e.jsxs("div",{className:"text-center mb-8",children:[e.jsx(C,{}),e.jsx("h1",{className:"text-4xl font-bold text-gray-800 mb-4",children:"Welcome Back!"}),e.jsx("p",{className:"text-lg text-gray-600 leading-relaxed",children:"Your health journey continues here. Reset your password to regain access."})]})}),e.jsxs("div",{className:"w-full max-w-md mx-auto",children:[e.jsxs("div",{className:"lg:hidden text-center mb-6",children:[e.jsx("img",{className:"mx-auto mb-4 drop-shadow-lg",src:P,alt:"Healthcare",width:"200",height:"200"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Reset Password"}),e.jsx("p",{className:"text-gray-600",children:"Get back to your health journey"})]}),e.jsx("div",{className:"bg-white/70 backdrop-blur-md rounded-3xl shadow-2xl border border-white/50 overflow-hidden",children:e.jsxs("div",{className:"px-6 py-8",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:b.title}),e.jsx("div",{className:"w-12 h-1 bg-gradient-to-r from-cyan-400 to-blue-500 rounded-full mx-auto mb-3"}),e.jsx("p",{className:"text-sm text-gray-600",children:b.desc})]}),e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"flex space-x-2",children:[1,2,3].map(s=>e.jsx("div",{className:`w-3 h-3 rounded-full ${s<=r?"bg-gradient-to-r from-cyan-400 to-blue-500":"bg-gray-200"}`},s))})}),f&&e.jsx("div",{className:"bg-green-50 border-l-4 border-green-400 p-4 mb-6 rounded-r-lg",children:e.jsx("p",{className:"text-sm text-green-700",children:f})}),g&&e.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 mb-6 rounded-r-lg",children:e.jsx("p",{className:"text-sm text-red-700",children:g})}),e.jsxs("form",{onSubmit:v,className:"space-y-5",children:[r===1&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"})})}),e.jsx("input",{type:"email",value:t.email,onChange:s=>m("email",s.target.value),className:"block w-full pl-10 pr-3 py-3 border border-gray-200 rounded-xl text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition-all duration-200 bg-white/50",placeholder:"Enter your email"})]}),a.email&&e.jsx("p",{className:"text-red-500 text-sm",children:a.email})]}),r===2&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Verification Code"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("input",{type:"text",value:t.otp,onChange:s=>m("otp",s.target.value),className:"block w-full pl-10 pr-3 py-3 border border-gray-200 rounded-xl text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition-all duration-200 bg-white/50",placeholder:"Enter 6-digit code",maxLength:6})]}),a.otp&&e.jsx("p",{className:"text-red-500 text-sm",children:a.otp})]}),r===3&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),e.jsx("input",{type:"password",value:t.password,onChange:s=>m("password",s.target.value),className:"block w-full pl-10 pr-3 py-3 border border-gray-200 rounded-xl text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition-all duration-200 bg-white/50",placeholder:"Enter new password"})]}),a.password&&e.jsx("p",{className:"text-red-500 text-sm",children:a.password})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Confirm New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("input",{type:"password",value:t.confirmPassword,onChange:s=>m("confirmPassword",s.target.value),className:"block w-full pl-10 pr-3 py-3 border border-gray-200 rounded-xl text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition-all duration-200 bg-white/50",placeholder:"Confirm new password"})]}),a.confirmPassword&&e.jsx("p",{className:"text-red-500 text-sm",children:a.confirmPassword})]})]}),e.jsx("button",{type:"submit",disabled:w,className:"w-full bg-gradient-to-r from-cyan-500 to-blue-600 hover:from-cyan-600 hover:to-blue-700 text-white font-bold py-3 px-4 rounded-xl transition-all duration-300 transform hover:scale-[1.02] focus:outline-none focus:ring-4 focus:ring-cyan-200 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none shadow-lg",children:w?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),r===1?"Sending OTP...":r===2?"Verifying...":"Resetting..."]}):e.jsx(e.Fragment,{children:r===1?"Send Reset Code":r===2?"Verify Code":"Reset Password"})}),e.jsx("div",{className:"text-center",children:e.jsxs("button",{type:"button",onClick:()=>y("/login"),className:"text-sm font-medium text-cyan-600 hover:text-cyan-800 transition-colors duration-200 inline-flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Login"]})})]})]})})]})]})})})};export{F as default};
